"use strict";angular.module("dashboradApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","leaflet-directive","nvd3","ngTable","btford.socket-io"]).config(["$routeProvider",function(a){a.when("/GeospatialView",{templateUrl:"views/geospatialView.html",controller:"GeospatialViewCtrl",controllerAs:"geospatialView"}).when("/keyMetrics",{templateUrl:"views/keyMetrics.html",controller:"KeyMetricsCtrl",controllerAs:"keyMetrics"}).when("/dataView",{templateUrl:"views/dataView.html",controller:"DataViewCtrl",controllerAs:"dataView"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).otherwise({redirectTo:"/GeospatialView"})}]).factory("NavService",["$location",function(a){return{init:function(){$(".navBtn").removeClass("active"),$("#"+a.path().slice(1)).addClass("active")},toggleNav:function(){return function(){$("#wrapper").toggleClass("toggled")}}}}]).factory("myService",["$http",function(a){var b={interval:setInterval(function(){},1e4),async:function(b){var c=a.get(b).success(function(a){return a.data}).error(function(a){console.log(a),alert(a)});return c},pulling:function(a){b.interval=setInterval(function(){a()},3e3)},init:function(){clearInterval(b.interval)}};return b}]),angular.module("dashboradApp").controller("GeospatialViewCtrl",["$scope","$http","NavService","myService",function(a,b,c,d){function e(a){return a.map(function(a){return{lat:a.lat,lng:a.lng,message:"Number of employees: "+a.number}})}function f(){d.async("data/employees.json").then(function(b){console.log(b),angular.toJson(b.data.companies)===angular.toJson(a.employeesData)&&null!=a.employeesData?console.log("no update"):(a.employeesData=b.data.companies,a.markers=e(a.employeesData))})}a.toggleNav=c.toggleNav(),a.page="Geospatial View",c.init(),d.init(),f(),d.pulling(f),a.employeesData=[],angular.extend(a,{us:{lat:41.850033,lng:-87.6500523,zoom:4},markers:{},controls:{scale:!1}})}]),angular.module("dashboradApp").controller("KeyMetricsCtrl",["$scope","$http","NavService","myService",function(a,b,c,d){function e(a){var b,c=[],d=a.match(/[^\r\n]+/g);d.shift().split(",");return d.forEach(function(a){a=a.split(","),b={series:0,x:parseInt(a[0]),y:parseInt(a[1])},c.push(b)}),c}function f(){d.async("data/numberOfReportedIssues.csv").then(function(b){a.numberOfReportedIssuesValue===b.data&&null!=a.numberOfReportedIssuesValue?console.log("numberOfReportedIssues no update"):(a.numberOfReportedIssuesValue=b.data,a.dataBarReportedIssues=[{values:e(a.numberOfReportedIssuesValue),key:"Reported Issues",color:"#7777ff",area:!0}])}),d.async("data/numberOfPayingCustomers.csv").then(function(b){a.dataLinePayingCustomersValue===b.data&&null!=a.dataLinePayingCustomersValue?console.log("dataLinePayingCustomers no update"):(a.dataLinePayingCustomersValue=b.data,a.dataLinePayingCustomers=[{values:e(a.dataLinePayingCustomersValue),key:"Paying customers",color:"#7777ff",area:!0}])})}a.toggleNav=c.toggleNav(),a.page="Key Metrics View",c.init(),d.init(),f(),d.pulling(f),a.numberOfReportedIssuesValue=null,a.dataLinePayingCustomersValue=null,a.optionsPayingCustomers={chart:{type:"lineChart",height:450,margin:{top:20,right:20,bottom:40,left:55},x:function(a){return a.x},y:function(a){return a.y},useInteractiveGuideline:!0,xAxis:{axisLabel:"Months",tickFormat:function(a){var b=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return b[a-1]}},yAxis:{axisLabel:"Customers Number(k)",tickFormat:function(a){return d3.format(".02f")(a)},axisLabelDistance:-10}}},a.optionsReportedIssues={chart:{type:"historicalBarChart",height:450,margin:{top:20,right:20,bottom:40,left:55},x:function(a){return a.x},y:function(a){return a.y},useInteractiveGuideline:!0,xAxis:{axisLabel:"Months",tickFormat:function(a){var b=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return b[a-1]}},yAxis:{axisLabel:"Issues Number",tickFormat:function(a){return d3.format(".02f")(a)},axisLabelDistance:-10}}}}]),angular.module("dashboradApp").controller("DataViewCtrl",["$scope","$http","NavService","NgTableParams","myService",function(a,b,c,d,e){function f(){e.async("data/issues.json").then(function(b){angular.toJson(b.data)===angular.toJson(a.dataset)&&null!=a.dataset?console.log("no update"):(a.dataset=b.data,g.tableParams=new d({},{dataset:a.dataset.issues}))})}a.toggleNav=c.toggleNav(),a.page="Data View",c.init(),e.init(),f(),e.pulling(f);var g=this;a.dataset=null}]),angular.module("dashboradApp").controller("AboutCtrl",["$scope","NavService",function(a,b){b.init(),a.toggleNav=b.toggleNav(),a.page="About"}]),angular.module("dashboradApp").run(["$templateCache",function(a){a.put("views/about.html","<!-- TopHeader --> <ng-include src=\"'views/top-header.html'\"></ng-include> <!-- /#topheader-wrapper --> <p>Requirements You must develop a corporate dashboard application using a front-end MVC framework of your choosing. The dashboard application must contain a header (with the currently selected dashboard’s name); a menu, allowing the user to navigate between dashboards; and the primary dashboard display area. You should find, or create, your own data files in CSV and JSON formats to provide data to the dashboards. The required dashboards are: A geospatial view, identifying the number of employees at various company locations. A “key metrics” view, containing components displaying: the number of open issues, a line chart reflecting number of paying customers over a period of time, and a bar chart reflecting number of reported issues over a period of time. A “data view” of all issues, with an appearance similar to a spreadsheet, that is sortable and filterable. An issue should contain the following fields: submission timestamp customer name customer email address description open/closed status closed timestamp employee name </p>"),a.put("views/dataView.html",'<!-- TopHeader --> <ng-include src="\'views/top-header.html\'"></ng-include> <!-- /#topheader-wrapper --> <div class="row"> <div class="col-md-12"> <div class="panel panel-default"> <!-- Default panel contents --> <div class="panel-heading">Reported issues</div> <table ng-table="dataView.tableParams" class="table table-condensed table-bordered table-striped responsive-table"> <tr ng-repeat="row in $data"> <td data-title="\'Open Time\'" filter="{timestamp: \'text\'}" sortable>{{row.timestamp | date : format : timezone}}</td> <td data-title="\'Customer Name\'" filter="{customerName: \'text\'}" sortable>{{row.customerName}}</td> <td data-title="\'Email\'" filter="{email: \'text\'}" sortable>{{row.email}}</td> <td data-title="\'Description\'" filter="{description: \'text\'}" sortable>{{row.description}}</td> <td data-title="\'Status\'" filter="{status: \'text\'}" sortable>{{row.status}}</td> <td data-title="\'Closed Time\'" filter="{closedTimeStamp: \'text\'}" sortable>{{row.closedTimeStamp}}</td> <td data-title="\'Employee Name\'" filter="{employeeName: \'text\'}" sortable>{{row.employeeName}}</td> </tr> </table> </div> </div> </div>'),a.put("views/geospatialView.html",'<!-- TopHeader --> <ng-include src="\'views/top-header.html\'"></ng-include> <!-- /#topheader-wrapper --> <div class="row"> <div class="col-md-8"> <div class="panel panel-default"> <!-- Default panel contents --> <div class="panel-heading">Number of employees</div> <div class="panel-body"> <p>Some default panel content here. Nulla vitae elit libero, a pharetra augue. Aenean lacinia bibendum nulla sed consectetur. Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum. Nullam id dolor id nibh ultricies vehicula ut id elit.</p> </div> <leaflet lf-center="us" markers="markers" controls width="100%" height="500px"></leaflet> </div> </div> <div class="col-md-4"> <div class="panel panel-default"> <!-- Default panel contents --> <div class="panel-heading">Table of employees number</div> <div class="panel-body"> <p>Some default panel content here. Nulla vitae elit libero, a pharetra augue. Aenean lacinia bibendum nulla sed consectetur. Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum. Nullam id dolor id nibh ultricies vehicula ut id elit.</p> </div> <!-- Table --> <table class="table table-striped"> <thead> <tr> <th>Location</th> <th>Numbers</th> </tr> </thead> <tbody> <tr ng-repeat="employee in employeesData"> <td>{{employee.location}}</td> <td>{{employee.number}}</td> </tr> </tbody> </table> </div> </div> </div>'),a.put("views/keyMetrics.html",'<!-- TopHeader --> <ng-include src="\'views/top-header.html\'"></ng-include> <!-- /#topheader-wrapper --> <div class="row"> <div class="col-md-3"> <div class="panel panel-default"> <!-- Default panel contents --> <div class="panel-heading"> Open issues</div> <div class="panel-body"> <p><a href="/dataView">131</a></p> </div> </div> </div> <div class="col-md-3"> <div class="panel panel-default"> <!-- Default panel contents --> <div class="panel-heading"> Other issues</div> <div class="panel-body"> <p><a href="/">434</a></p> </div> </div> </div> <div class="col-md-3"> <div class="panel panel-default"> <!-- Default panel contents --> <div class="panel-heading"> Other issues</div> <div class="panel-body"> <p><a href="/">23</a></p> </div> </div> </div> <div class="col-md-3"> <div class="panel panel-default"> <!-- Default panel contents --> <div class="panel-heading"> Other issues</div> <div class="panel-body"> <p><a href="/">34</a></p> </div> </div> </div> <div class="col-md-6"> <div class="panel panel-default"> <!-- Default panel contents --> <div class="panel-heading">Number of paying customers</div> <div class="panel-body"> <p>Some default panel content here. Nulla vitae elit libero, a pharetra augue. Aenean lacinia bibendum nulla sed consectetur. Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum. Nullam id dolor id nibh ultricies vehicula ut id elit.</p> </div> <nvd3 options="optionsPayingCustomers" data="dataLinePayingCustomers"></nvd3> </div> </div> <div class="col-md-6"> <div class="panel panel-default"> <!-- Default panel contents --> <div class="panel-heading">Number of reported issues</div> <div class="panel-body"> <p>Some default panel content here. Nulla vitae elit libero, a pharetra augue. Aenean lacinia bibendum nulla sed consectetur. Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum. Nullam id dolor id nibh ultricies vehicula ut id elit.</p> </div> <nvd3 options="optionsReportedIssues" data="dataBarReportedIssues"></nvd3> </div> </div> </div>'),a.put("views/side-nav.html",'<div id="sidebar-wrapper"> <ul class="sidebar-nav"> <li class="sidebar-brand"> <a href="/"> Corporate Dashboard </a> </li> <li id="GeospatialView" class="navBtn"> <a href="#/GeospatialView">Geospatial View</a> </li> <li id="keyMetrics" class="navBtn"> <a href="#/keyMetrics">Key Metrics</a> </li> <li id="dataView" class="navBtn"> <a href="#/dataView">Data View</a> </li> <li id="about" class="navBtn"> <a href="#/about">About</a> </li> </ul> </div>'),a.put("views/top-header.html",'<nav class="navbar navbar-default"> <div class="container-fluid"> <div class="navbar-header"> <a ng-click="toggleNav()" class="btn btn-link btn-lg">nav</a> <span>{{page}}</span> </div> </div> </nav>')}]);